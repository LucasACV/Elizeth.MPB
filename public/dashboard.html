<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <header> 
        <nav>
            <span class="logo">divina elizeth</span>
            <ul class="menu">

                <li><a href="./dashboard.html">DashBoard</a></li>
                <li><a href="./quiz.html">Quiz</a></li>
                <li><a href="./index.html">Sair</a></li>
                <p>Bem vindo, <span id="usuarionome"></span></p>
            </ul>

            <script>
                
                usuarionome.innerHTML = sessionStorage.NOME_USUARIO
            </script>
        </nav>
    </header>


    <main class="dashboard-central">
        <div class="div-dashboard">
            <h3>DashBoard - Quiz Elizeth/Bossa</h3>
            <hr>
            <span>Visão geral dos resultados do Quiz</span>
        </div>
        <div class="div-kpis">
            <div class="div-kpi-singular">
                <div class="div-kpi-texto">
                    <h3>Usuários que responderam</h3>
                    <div class="div-kpi-info">
                        <p id="total_usuarios"></p>
                    </div>
                </div>
                <div class="div-kpi-img">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 640 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                        <path
                            d="M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192l42.7 0c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0L21.3 320C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7l42.7 0C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3l-213.3 0zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352l117.3 0C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7l-330.7 0c-14.7 0-26.7-11.9-26.7-26.7z" />
                    </svg>
                </div>
            </div>
            <div class="div-kpi-singular">
                <div class="div-kpi-texto">
                    <h3>Sexo que mais acertou</h3>
                    <div class="div-kpi-info-texto">
                        <p id="p_score_sexo"></p>
                    </div>
                </div>
                <div class="div-kpi-img">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 640 512">
                        <path
                            d="M176 288a112 112 0 1 0 0-224 112 112 0 1 0 0 224zM352 176c0 86.3-62.1 158.1-144 173.1l0 34.9 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0 0 32c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-32-32 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-34.9C62.1 334.1 0 262.3 0 176C0 78.8 78.8 0 176 0s176 78.8 176 176zM271.9 360.6c19.3-10.1 36.9-23.1 52.1-38.4c20 18.5 46.7 29.8 76.1 29.8c61.9 0 112-50.1 112-112s-50.1-112-112-112c-7.2 0-14.3 .7-21.1 2c-4.9-21.5-13-41.7-24-60.2C369.3 66 384.4 64 400 64c37 0 71.4 11.4 99.8 31l20.6-20.6L487 41c-6.9-6.9-8.9-17.2-5.2-26.2S494.3 0 504 0L616 0c13.3 0 24 10.7 24 24l0 112c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-33.4-33.4L545 140.2c19.5 28.4 31 62.7 31 99.8c0 97.2-78.8 176-176 176c-50.5 0-96-21.3-128.1-55.4z" />
                    </svg>
                </div>
            </div>
            <div class="div-kpi-singular">
                <div class="div-kpi-texto">
                    <h3>Artista mais ouvido</h3>
                    <div class="div-kpi-info-texto">
                        <p id="artista_escolhido"></p>
                    </div>
                </div>
                <div class="div-kpi-img">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512">
                        <path
                            d="M499.1 6.3c8.1 6 12.9 15.6 12.9 25.7l0 72 0 264c0 44.2-43 80-96 80s-96-35.8-96-80s43-80 96-80c11.2 0 22 1.6 32 4.6L448 147 192 223.8 192 432c0 44.2-43 80-96 80s-96-35.8-96-80s43-80 96-80c11.2 0 22 1.6 32 4.6L128 200l0-72c0-14.1 9.3-26.6 22.8-30.7l320-96c9.7-2.9 20.2-1.1 28.3 5z" />
                    </svg>
                </div>
            </div>

        </div>
        <div class="grafico">
            <div class="div-grafico1">
                <h3>Pessoas que fizeram o Quiz divido por Idade e Sexo</h3>
                <canvas id="myChart1"></canvas>
            </div>
            <div class="div-grafico2">
                <canvas id="myChart2"></canvas>
                <div class="div-grafico2-p">
                    <p>Pessoas que conseguiram mais/menos que 50% de pontos no Quiz</p>
                </div>
            </div>

        </div>
    </main>








    <footer> 
        <p class="footer-copy">Copyright 2025</p>
        <p class="footer-autor">Feito por Lucas Valdez</p>
    </footer>





</body>

</html>



<script>
    const ctx = document.getElementById('myChart1');
    const ctx2 = document.getElementById('myChart2');


    fetch("/dash/graficoskpis"). // para os dados das KPIs que estão a cima dos graficos
        then(function (resposta) {
            resposta.json().then(
                function (kpis) {
                    total_usuarios.innerHTML = kpis.numeroderespostas
                    p_score_sexo.innerHTML = kpis.melhorsexo
                    artista_escolhido.innerHTML = kpis.artistasescolhido

                    console.log(kpis)

                }
            )
        }),

        fetch("/dash/graficos1")  // peguei os dados para colocar no grafico a esquerda
            .then(function (resposta) {
                resposta.json().then(
                    function (grafico1) {
                        console.log(grafico1)
                        let homens = [grafico1[0].faixa_15_20,
                        grafico1[0].faixa_21_25,
                        grafico1[0].faixa_26_30,
                        grafico1[0].faixa_31_35,
                        grafico1[0].faixa_36_40,
                        grafico1[0].faixa_40_mais]

                        let mulheres = [grafico1[1].faixa_15_20,
                        grafico1[1].faixa_21_25,
                        grafico1[1].faixa_26_30,
                        grafico1[1].faixa_31_35,
                        grafico1[1].faixa_36_40,
                        grafico1[1].faixa_40_mais]


                        new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: ['15-20', '21-25', '26-30', '31-35', '36-40', '40+'],
                                datasets: [
                                    {
                                        label: 'Homens',
                                        data: homens,
                                        backgroundColor: 'black',
                                        borderColor: 'rgba(245, 245, 220)',
                                        borderWidth: 1
                                    },
                                    {
                                        label: 'Mulheres',
                                        data: mulheres,
                                        backgroundColor: 'white',
                                        borderColor: 'rgba(245, 245, 220)',
                                        borderWidth: 1
                                    }
                                ]
                            },
                            options: {

                                scales: {
                                    y: {
                                        beginAtZero: true
                                    }
                                }
                            }
                        })


                    }
                )
            })

    fetch("/dash/graficos2") // peguei os dados para o grafico a direita
        .then(function (resposta) {
            resposta.json().then(
                function (grafico2) {
                    console.log(grafico2)
                    let maisque50 = grafico2[0].total_pessoas;
                    let menosque50 = grafico2[1].total_pessoas;

                    new Chart(ctx2, {
                        type: 'doughnut',
                        data: {
                            labels: ['50% +', '50% -'],
                            datasets: [{
                                label: 'Acertaram mais/menos que 50% do Quiz',
                                data: [maisque50, menosque50],
                                backgroundColor: ['rgba(245, 245, 220)', 'RGB (245, 245, 220)'],

                                borderWidth: 1
                            }]
                        },
                        options: {

                        }
                    })
                }
            )
        })












</script>